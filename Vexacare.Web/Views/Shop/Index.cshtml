@model IEnumerable<ProductListVM>

<!-- Banner Section Start  -->
<section id="shop_banner" class="shop-section">
    <div class="shop-container">
        <div class="shop-content">
            <h1 class="shop-heading" id="shop-heading">
                Shop Microbiota Kits & Supplements
            </h1>
            <p class="shop-description" id="shop-description">
                Choose the right kit or supplement tailored to your health goals.
            </p>
        </div>
    </div>
</section>
<!-- Banner Section End  -->
<!-- Test Kit Details Section Start  -->
@foreach(var product in Model)
{

    if (product.ProductType == Vexacare.Domain.Enums.ProductType.TestKit)
    {
        <section id="kit_details" class="container">
            <div class="kit-container">
                <!-- Image Section -->
                <div class="kit-image-wrapper">
                    @if (!string.IsNullOrEmpty(product.ProductImages))
                    {
                        <img src="@product.ProductImages" alt="kit image" class="kit-image" />
                    }
                    else
                    {
                        <i class="fas fa-box-open fa-4x text-muted"></i>
                    }
                </div>

                <!-- Details Section -->
                <div class="kit-details">
                    <h4 class="kit-title">@product.Name</h4>
                    <p class="kit-description">@product.BreifDescription</p>
                    <p class="kit-price">$@product.Price</p>

                    <!-- Features List -->
                    <div class="kit-features">
                        @foreach (var benefit in product.ProductBenefits)
                        {
                            <div class="kit-feature-item">
                                <span class="kit-check">✔</span>
                                <p class="kit-feature-text">@benefit.BenefitName</p>
                            </div>                    
                        }
                    </div>

                    <!-- Quantity Section -->
                    <div class="kit-quantity-section">
                        <h4 class="kit-quantity-label">Quantity</h4>
                        <div class="kit-quantity-controls">
                            <div class="kit-quantity-box">
                                <button type="button" class="product-qty-btn" id="decrease-qty">-</button>
                                <p class="product-qty-display" id="quantity">1</p>
                                <button type="button" class="product-qty-btn" id="increase-qty">+</button>
                            </div>
                            <a asp-controller="Shop" asp-action="ProductDetail" asp-route-id="@product.Id" class="kit-add-to-cart text-center">Details</a>
                            @* <a class="kit-add-to-cart text-center">Add to Cart</a> *@
                            <button class="product-add-btn" id="add-to-cart" data-product-id="@product.Id">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    } 
}
<!-- Test Kit Details Section End  -->


<!-- Customized Galenic Supplements Start  -->


<section id="customized_supplements">
    <div class="sup-page-bg">
        <div class="container">
            <!-- Header Section -->
            <div class="sup-header">
                <h4 class="sup-title">Customized Galenic Supplements</h4>
                <p class="sup-subtitle">
                    Formulated based on your microbiota results.
                </p>
            </div>
            <!-- Product Grid -->
            <div class="sup-product-grid">
                <!-- 1 -->
                @foreach (var product in Model)
                {
                    if(product.ProductType == Vexacare.Domain.Enums.ProductType.Supplement)
                    {
                        <div class="sup-card">
                        <div class="sup-card-img-wrapper">
                            @if (!string.IsNullOrEmpty(product.ProductImages))
                            {
                                <img src="@product.ProductImages" alt="product" class="sup-card-img" />
                            }
                        </div>
                        <div class="sup-card-body">
                            <h5 class="sup-card-title">@product.Name</h5>
                                <p class="sup-card-desc">@product.BreifDescription</p>
                            <div class="sup-card-bottom">
                                <p class="sup-card-price">$@product.Price</p>
                                    <a asp-controller="Shop" asp-action="ProductDetail" asp-route-id="@product.Id" class="sup-card-btn">View details</a>
                            </div>
                        </div>
                    </div>
                    }
                }
            </div>
            <!-- Pagination -->
            <div class="sup-pagination">
                <button class="sup-page-btn">«</button>
                <button class="sup-page-btn active">1</button>
                <button class="sup-page-btn">2</button>
                <button class="sup-page-btn">3</button>
                <button class="sup-page-btn">4</button>
                <button class="sup-page-btn">5</button>
                <button class="sup-page-btn">»</button>
            </div>
        </div>
    </div>
</section>

<!-- Customized Galenic Supplements End  -->


<!-- Need Help Choosing the Right Solution? Section Start  -->
<section id="need-help">
    <div class="doc-section">
        <div class="container">
            <!-- Section Header -->
            <div class="doc-header">
                <h5 class="doc-title">Need Help Choosing the Right Solution?</h5>
                <div class="doc-sub-header">
                    <p class="doc-subtext">
                        Our medical experts are here to guide you.
                    </p>
                    <button class="doc-view-btn">
                        View All <span class="doc-arrow">→</span>
                    </button>
                </div>
            </div>

            <!-- Doctor Cards Grid -->
            <div class="doc-grid">

                @foreach(var doctor in ViewBag.DoctorList)
                {
                    <!-- Card 1 -->
                    <div class="doc-card">
                        <div class="doc-card-img-wrapper">
                            <img src="@doctor.ProfileImagePath"
                                 alt="Dr. Sarah Johnson"
                                 class="doc-card-img" />
                        </div>
                        <div class="doc-card-body">
                            <h5 class="doc-card-name">@doctor.Name</h5>
                            <p class="doc-card-role">Chief Medical Officer</p>
                            <a asp-controller="Consultations" asp-action="BookNow" asp-route-id="@doctor.Id" class="doc-book-btn">Book Consultation</a>
                        </div>
                    </div>
                }
                @* <!-- Card 1 -->
                <div class="doc-card">
                    <div class="doc-card-img-wrapper">
                        <img src="~/assets/images/MedicalExperts1.png"
                             alt="Dr. Sarah Johnson"
                             class="doc-card-img" />
                    </div>
                    <div class="doc-card-body">
                        <h5 class="doc-card-name">Dr. Sarah Johnson</h5>
                        <p class="doc-card-role">Chief Medical Officer</p>
                        <button class="doc-book-btn">Book Consultation</button>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="doc-card">
                    <div class="doc-card-img-wrapper">
                        <img src="~/assets/images/MedicalExperts1.png"
                             alt="Dr. Michael Lee"
                             class="doc-card-img" />
                    </div>
                    <div class="doc-card-body">
                        <h5 class="doc-card-name">Dr. Michael Lee</h5>
                        <p class="doc-card-role">Gut Health Specialist</p>
                        <button class="doc-book-btn">Book Consultation</button>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="doc-card">
                    <div class="doc-card-img-wrapper">
                        <img src="~/assets/images/MedicalExperts1.png"
                             alt="Dr. Amanda Smith"
                             class="doc-card-img" />
                    </div>
                    <div class="doc-card-body">
                        <h5 class="doc-card-name">Dr. Amanda Smith</h5>
                        <p class="doc-card-role">Nutrition Advisor</p>
                        <button class="doc-book-btn">Book Consultation</button>
                    </div>
                </div>

                <!-- Card 4 -->
                <div class="doc-card">
                    <div class="doc-card-img-wrapper">
                        <img src="~/assets/images/MedicalExperts1.png"
                             alt="Dr. David Kim"
                             class="doc-card-img" />
                    </div>
                    <div class="doc-card-body">
                        <h5 class="doc-card-name">Dr. David Kim</h5>
                        <p class="doc-card-role">Clinical Researcher</p>
                        <button class="doc-book-btn">Book Consultation</button>
                    </div>
                </div> *@
            </div>
        </div>
    </div>
</section>
<!-- Need Help Choosing the Right Solution? Section End  -->
<!-- Get Weekly Gut Health Tips Section Start  -->

<section id="newsletter">
    <div class="news-section">
        <div class="container">
            <div class="news-content">
                <h5 class="news-title">Get Weekly Gut Health Tips</h5>
                <p class="news-description">
                    Join our community and receive the latest insights directly in
                    your inbox.
                </p>
                <div class="news-form">
                    <input type="text"
                           class="news-input"
                           placeholder="Enter your email" />
                    <button class="news-button">Subscribe</button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Get Weekly Gut Health Tips Section End  -->


@* Added by Sazib *@

@section Scripts {
    <script>
        $(document).ready(function() {
            let quantity = 1;

            // Quantity controls
            $('#increase-qty').click(function() {
                quantity++;
                $('#quantity').text(quantity);
            });

            $('#decrease-qty').click(function() {
                if (quantity > 1) {
                    quantity--;
                    $('#quantity').text(quantity);
                }
            });

                    // Add to cart
        $('#add-to-cart').click(function() {
            const productId = $(this).data('product-id');

            $.post('@Url.Action("AddToCart", "Shop")', {
                productId: productId,
                quantity: quantity
            }, function(response) {
                if (response.success) {
                    // Update cart count in navbar
                    $('#cart-count').text(response.cartCount);

                    // Show success message
                    alert('Product added to cart successfully!');
                } else {
                    alert(response.message);
                    window.location.href = '@Url.Action("Login", "Account")';

                }
            }).fail(function() {
                alert('You have not acces of this page!!. Please try again.');
                window.location.href = '@Url.Action("Login", "Account")';
            });
        });
        });
    </script>
}