@model LifestyleInfoVM
<!-- Medical Profile Breadcrumb Start -->
      <section class="medical-profile-breadcrumb">
        <div class="container">
          <div class="medical-profile-breadcrumb-wrapper">
            <div class="medical-profile-breadcrumb-content">
              <div class="medical-profile-breadcrumb-number compleate">1</div>
              <p class="medical-profile-breadcrumb-title">Basic Info</p>
            </div>

            <div class="medical-profile-breadcrumb-line"></div>

            <div class="medical-profile-breadcrumb-content">
              <div class="medical-profile-breadcrumb-number compleate">2</div>
              <p class="medical-profile-breadcrumb-title">Health Info</p>
            </div>

            <div class="medical-profile-breadcrumb-line"></div>

            <div class="medical-profile-breadcrumb-content">
              <div class="medical-profile-breadcrumb-number compleate">3</div>
              <p class="medical-profile-breadcrumb-title">
                Gastrointestinal History
              </p>
            </div>

            <div class="medical-profile-breadcrumb-line"></div>

            <div class="medical-profile-breadcrumb-content">
              <div class="medical-profile-breadcrumb-number compleate">4</div>
              <p class="medical-profile-breadcrumb-title">
                Function & Symptoms
              </p>
            </div>

            <div class="medical-profile-breadcrumb-line"></div>

            <div class="medical-profile-breadcrumb-content">
              <div class="medical-profile-breadcrumb-number compleate">5</div>
              <p class="medical-profile-breadcrumb-title">Diet Profile</p>
            </div>

            <div class="medical-profile-breadcrumb-line"></div>

            <div class="medical-profile-breadcrumb-content">
              <div class="medical-profile-breadcrumb-number active">6</div>
              <p class="medical-profile-breadcrumb-title">Lifestyle</p>
            </div>

            <div class="medical-profile-breadcrumb-line"></div>

            <div class="medical-profile-breadcrumb-content">
              <div class="medical-profile-breadcrumb-number">7</div>
              <p class="medical-profile-breadcrumb-title">Therapies & Goals</p>
            </div>
          </div>
        </div>
      </section>
      <!-- Medical Profile Breadcrumb End -->

      <!-- Medical Profile Form Start -->
<!-- Medical Profile Form Start -->
<section class="medical-profile-form medical-profile-form-6">
    <div class="container">
        <div class="medical-profile-form-wrapper">
            <div class="form-step">
                <h2 class="form-title">Step 6: Lifestyle</h2>

                <form asp-action="LifestyleInfo" method="post">
                    <!-- Physical Activity Section -->
                    <div class="form-section">
                        <h3 class="section-title">Physical Activity</h3>

                        <label asp-for="ActivityType" class="form-label"></label>
                        <input asp-for="ActivityType"
                               type="text"
                               class="form-input"
                               placeholder="e.g., Yoga, Running, Gym" />
                        <span asp-validation-for="ActivityType" class="text-danger"></span>

                        <div class="two-column-inputs">
                            <div>
                                <label asp-for="SessionsPerWeek" class="form-label"></label>
                                <input asp-for="SessionsPerWeek"
                                       type="number"
                                       class="form-input"
                                       placeholder="0"
                                       min="0"
                                       max="20" />
                                <span asp-validation-for="SessionsPerWeek" class="text-danger"></span>
                            </div>
                            <div>
                                <label asp-for="AverageDurationMinutes" class="form-label"></label>
                                <input asp-for="AverageDurationMinutes"
                                       type="number"
                                       class="form-input"
                                       placeholder="0"
                                       min="0"
                                       max="300" />
                                <span asp-validation-for="AverageDurationMinutes" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Sleep Quality Section -->
                    <div class="form-section">
                        <h3 class="section-title">Sleep Quality</h3>

                        <label asp-for="AverageHoursOfSleep" class="form-label"></label>
                        <input asp-for="AverageHoursOfSleep"
                               type="number"
                               class="form-input"
                               placeholder="e.g., 7.5"
                               min="0"
                               max="24"
                               step="0.1" />
                        <span asp-validation-for="AverageHoursOfSleep" class="text-danger"></span>

                        <div class="sleep-quality-rating">
                            <label asp-for="SleepQualityRating" class="form-label"></label>
                            <div class="range-input-container">
                                <input asp-for="SleepQualityRating"
                                       type="range"
                                       class="form-range-input"
                                       min="1"
                                       max="10"
                                       value="@(Model.SleepQualityRating ?? 5)" />
                                <div class="range-labels">
                                    <span>1</span>
                                    <span>10</span>
                                </div>
                                <span class="range-value">@(Model.SleepQualityRating ?? 5)</span>
                            </div>
                            <span asp-validation-for="SleepQualityRating" class="text-danger"></span>
                        </div>

                        <label asp-for="SpecificProblems" class="form-label"></label>
                        <textarea asp-for="SpecificProblems"
                                  class="form-input"
                                  placeholder="Trouble falling asleep, waking up early..."
                                  rows="3"></textarea>
                        <span asp-validation-for="SpecificProblems" class="text-danger"></span>
                    </div>

                    <!-- Stress and Habits Section -->
                    <div class="form-section">
                        <h3 class="section-title">Stress and Habits</h3>

                        <div class="stress-level">
                            <label asp-for="StressLevel" class="form-label"></label>
                            <div class="range-input-container">
                                <input asp-for="StressLevel"
                                       type="range"
                                       class="form-range-input"
                                       min="1"
                                       max="10"
                                       value="@(Model.StressLevel ?? 5)" />
                                <div class="range-labels">
                                    <span>1</span>
                                    <span>10</span>
                                </div>
                                <span class="range-value">@(Model.StressLevel ?? 5)</span>
                            </div>
                            <span asp-validation-for="StressLevel" class="text-danger"></span>
                        </div>

                        <div class="smoking-habit">
                            <label class="form-label">Smoking Habit</label>
                            <div class="diet-options">
                                <label class="diet-option">
                                    <input type="radio"
                                           asp-for="IsSmoker"
                                           value="true"
                                           id="smokerYes" />
                                    <span class="diet-option-label">Yes</span>
                                </label>
                                <label class="diet-option">
                                    <input type="radio"
                                           asp-for="IsSmoker"
                                           value="false"
                                           id="smokerNo"
                                           checked="@(Model.IsSmoker == false)" />
                                    <span class="diet-option-label">No</span>
                                </label>
                            </div>
                            <span asp-validation-for="IsSmoker" class="text-danger"></span>

                            <div class="conditional-field" id="smoking-details"
                                 style="@(Model.IsSmoker == true ? "display: block;" : "display: none;")">
                                <label asp-for="CigarettesPerDay" class="form-label"></label>
                                <input asp-for="CigarettesPerDay"
                                       type="number"
                                       class="form-input"
                                       placeholder="0"
                                       min="0"
                                       max="100" />
                                <span asp-validation-for="CigarettesPerDay" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Buttons -->
                    <div class="form-buttons">
                        <a asp-controller="Account" asp-action="DietProfileInfo" class="btn btn-prev">Previous</a>
                        <button type="submit" class="btn btn-next">Next</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Initialize all range sliders
            document.querySelectorAll(".form-range-input").forEach((slider) => {
                const container = slider.closest('.range-input-container');
                if (container) {
                    const valueDisplay = container.querySelector('.range-value');
                    if (valueDisplay) {
                        function updateSlider() {
                            const val = slider.value;
                            const min = slider.min || 1;
                            const max = slider.max || 10;
                            const percent = ((val - min) * 100) / (max - min);
                            slider.style.setProperty("--value", `${percent}%`);
                            valueDisplay.textContent = val;
                        }

                        slider.addEventListener("input", updateSlider);
                        updateSlider();
                    }
                }
            });

            // Handle smoking habit toggle
            const smokingRadios = document.querySelectorAll('input[name="IsSmoker"]');
            const smokingDetails = document.getElementById("smoking-details");

            if (smokingRadios && smokingDetails) {
                smokingRadios.forEach((radio) => {
                    radio.addEventListener("change", function () {
                        smokingDetails.style.display = this.value === 'true' ? 'block' : 'none';
                    });
                });
            }
        });
    </script>
}
